<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Clayer: /home/travis/build/yogeshg/clayer/include/property.h Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="clayer.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Clayer
   
   </div>
   <div id="projectbrief">Logging facility in C++ using compile time template meta programming</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">/home/travis/build/yogeshg/clayer/include/property.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="property_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00004"></a>00004 <span class="preprocessor">#ifndef __PROPERTY_H__</span>
<a name="l00005"></a>00005 <span class="preprocessor"></span><span class="preprocessor">#define __PROPERTY_H__</span>
<a name="l00006"></a>00006 <span class="preprocessor"></span>
<a name="l00007"></a>00007 <span class="preprocessor">#include &lt;iostream&gt;</span>
<a name="l00008"></a>00008 <span class="preprocessor">#include &lt;regex&gt;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;set&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;sstream&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;tuple&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;<a class="code" href="util_8h.html">util.h</a>&quot;</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="keyword">namespace </span>clayer {
<a name="l00015"></a>00015 
<a name="l00016"></a>00016 <span class="comment">// Concepts used for property reading and writing</span>
<a name="l00017"></a><a class="code" href="namespaceclayer.html#a5e4134cea2e11c8300f93718e196e06e">00017</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; concept <span class="keywordtype">bool</span> <a class="code" href="namespaceclayer.html#a5e4134cea2e11c8300f93718e196e06e">Streamable</a> = requires(T o, std::ostream &amp;s) {
<a name="l00018"></a>00018   { s &lt;&lt; o } -&gt; std::ostream &amp;;
<a name="l00019"></a>00019 };
<a name="l00020"></a>00020 
<a name="l00021"></a><a class="code" href="namespaceclayer.html#aa1a0d23ad523777a9592a9507f475b18">00021</a> <span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt; concept <span class="keywordtype">bool</span> <a class="code" href="namespaceclayer.html#aa1a0d23ad523777a9592a9507f475b18">StringRef</a> = requires(T o) {
<a name="l00022"></a>00022   { *o } -&gt; std::string;
<a name="l00023"></a>00023 };
<a name="l00024"></a>00024 
<a name="l00028"></a><a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334">00028</a> <span class="keyword">enum</span> <a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334" title="[items that are contained in a log record]">log_properties</a> {
<a name="l00029"></a><a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334abea7716ef6bcafe8a74ff6b2c86ae374">00029</a>   <a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334abea7716ef6bcafe8a74ff6b2c86ae374">FILE</a>,           
<a name="l00030"></a><a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334ac975454fa5dbcafacc2429cffbd3009a">00030</a>   <a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334ac975454fa5dbcafacc2429cffbd3009a" title="File name (CodeContext)">FUNC</a>,           
<a name="l00031"></a><a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334ac6f9b94cf7a9463645e3d93b04cec373">00031</a>   <a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334ac6f9b94cf7a9463645e3d93b04cec373" title="Function name (CodeContext)">LEVEL</a>,          
<a name="l00032"></a><a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334aa02d0b68ab7febfc558d5cb86d19b429">00032</a>   <a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334aa02d0b68ab7febfc558d5cb86d19b429" title="Severity level name (CodeContext)">LINE</a>,           
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="comment">// NAME</span>
<a name="l00035"></a><a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334a812e4c7f1fc43183a01346eb6fe4ec7d">00035</a>   <a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334a812e4c7f1fc43183a01346eb6fe4ec7d" title="Line number (CodeContext)">DATE</a>,           
<a name="l00036"></a><a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334a7d7d5a79b118123bebafe4e2b0a91d29">00036</a>   <a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334a7d7d5a79b118123bebafe4e2b0a91d29" title="Date on which a Log Record is created (RunContext)">TIME</a>,           
<a name="l00037"></a><a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334a299b0bef06e21f5caf5b511994b4ba74">00037</a>   <a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334a299b0bef06e21f5caf5b511994b4ba74" title="Time at which a Log Record is created (RunContext)">THREAD</a>,         
<a name="l00038"></a>00038 
<a name="l00039"></a><a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334af32a8af9e934e3049267d8ea420d72bc">00039</a>   <a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334af32a8af9e934e3049267d8ea420d72bc" title="Thread in which a LogRecord is created (RunContext)">HASH</a>,
<a name="l00040"></a><a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334add35f0d47d1c94aeec478e3ba799e229">00040</a>   <a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334add35f0d47d1c94aeec478e3ba799e229" title="Added by the user.">MESG</a>            
<a name="l00041"></a>00041 };
<a name="l00042"></a>00042 
<a name="l00048"></a><a class="code" href="structclayer_1_1_code_context.html">00048</a> <span class="keyword">struct </span><a class="code" href="structclayer_1_1_code_context.html" title="Log properties that can be inferred from code.">CodeContext</a> {
<a name="l00049"></a><a class="code" href="structclayer_1_1_code_context.html#acf7df6d0daa59d6cd94cd54466c86880">00049</a>   std::string <a class="code" href="structclayer_1_1_code_context.html#acf7df6d0daa59d6cd94cd54466c86880">file</a>;
<a name="l00050"></a><a class="code" href="structclayer_1_1_code_context.html#ac4097e3c69ca54e8b962577a3b66be02">00050</a>   std::string <a class="code" href="structclayer_1_1_code_context.html#ac4097e3c69ca54e8b962577a3b66be02">func</a>;
<a name="l00051"></a><a class="code" href="structclayer_1_1_code_context.html#a4a50ac2da5e15168ae9b18b52615901a">00051</a>   std::string <a class="code" href="structclayer_1_1_code_context.html#a4a50ac2da5e15168ae9b18b52615901a">level</a>;
<a name="l00052"></a><a class="code" href="structclayer_1_1_code_context.html#a8a6e57af69566d785270ed802cd63406">00052</a>   <span class="keywordtype">int</span> <a class="code" href="structclayer_1_1_code_context.html#a8a6e57af69566d785270ed802cd63406">line</a>;
<a name="l00053"></a><a class="code" href="structclayer_1_1_code_context.html#a00f2d748431711866778db9c1862bd6b">00053</a>   std::string <a class="code" href="structclayer_1_1_code_context.html#a00f2d748431711866778db9c1862bd6b">hash</a>;
<a name="l00054"></a>00054 
<a name="l00058"></a>00058   <a class="code" href="structclayer_1_1_code_context.html#ac3d211b33cca2ac6972eeb3d7f24040e" title="default constructs all the members">CodeContext</a>() = <span class="keywordflow">default</span>;
<a name="l00059"></a>00059 
<a name="l00069"></a><a class="code" href="structclayer_1_1_code_context.html#a7ce2b0206558f7a9fc75b92d4561f596">00069</a>   <a class="code" href="structclayer_1_1_code_context.html#ac3d211b33cca2ac6972eeb3d7f24040e" title="default constructs all the members">CodeContext</a>(<span class="keyword">const</span> std::string &amp;a, <span class="keyword">const</span> std::string &amp;b, <span class="keyword">const</span> std::string &amp;c,
<a name="l00070"></a>00070             <span class="keyword">const</span> <span class="keywordtype">int</span> &amp;d, <span class="keyword">const</span> std::string &amp;e)
<a name="l00071"></a>00071       : <a class="code" href="structclayer_1_1_code_context.html#acf7df6d0daa59d6cd94cd54466c86880">file</a>(a), <a class="code" href="structclayer_1_1_code_context.html#ac4097e3c69ca54e8b962577a3b66be02">func</a>(b), <a class="code" href="structclayer_1_1_code_context.html#a4a50ac2da5e15168ae9b18b52615901a">level</a>(c), <a class="code" href="structclayer_1_1_code_context.html#a8a6e57af69566d785270ed802cd63406">line</a>(d), <a class="code" href="structclayer_1_1_code_context.html#a00f2d748431711866778db9c1862bd6b">hash</a>(e) {}
<a name="l00072"></a>00072 
<a name="l00080"></a><a class="code" href="structclayer_1_1_code_context.html#a78daab5c7336f7586a672af9ab310782">00080</a>   <a class="code" href="structclayer_1_1_code_context.html#a78daab5c7336f7586a672af9ab310782" title="Returns a tuple of all the members.">decltype</a>(<span class="keyword">auto</span>) tie()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> std::tie(<a class="code" href="structclayer_1_1_code_context.html#acf7df6d0daa59d6cd94cd54466c86880">file</a>, <a class="code" href="structclayer_1_1_code_context.html#ac4097e3c69ca54e8b962577a3b66be02">func</a>, <a class="code" href="structclayer_1_1_code_context.html#a4a50ac2da5e15168ae9b18b52615901a">level</a>, <a class="code" href="structclayer_1_1_code_context.html#a8a6e57af69566d785270ed802cd63406">line</a>, <a class="code" href="structclayer_1_1_code_context.html#a00f2d748431711866778db9c1862bd6b">hash</a>); }
<a name="l00081"></a>00081 
<a name="l00090"></a><a class="code" href="structclayer_1_1_code_context.html#a6c3dd97e2bcffcdd0e972a688e064cc9">00090</a>   <span class="keywordtype">bool</span> <a class="code" href="structclayer_1_1_code_context.html#a6c3dd97e2bcffcdd0e972a688e064cc9" title="Compares two CodeContext using their tuple representation.">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="structclayer_1_1_code_context.html" title="Log properties that can be inferred from code.">CodeContext</a> &amp;rhs)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> tie() &lt; rhs.tie(); }
<a name="l00091"></a>00091 };
<a name="l00092"></a>00092 
<a name="l00100"></a><a class="code" href="namespaceclayer.html#ac481a62be904d97d85982ca57041def8">00100</a> std::ostream &amp;<a class="code" href="namespaceclayer.html#ac481a62be904d97d85982ca57041def8" title="prints CodeContext c to an out-stream ss">operator&lt;&lt;</a>(std::ostream &amp;ss, <span class="keyword">const</span> <a class="code" href="structclayer_1_1_code_context.html" title="Log properties that can be inferred from code.">CodeContext</a> &amp;c) {
<a name="l00101"></a>00101   <span class="keywordflow">return</span> util::to_string(ss, c.tie());
<a name="l00102"></a>00102 }
<a name="l00103"></a>00103 
<a name="l00109"></a><a class="code" href="structclayer_1_1_run_context.html">00109</a> <span class="keyword">struct </span><a class="code" href="structclayer_1_1_run_context.html" title="Log properties that are inferred when the code is run .">RunContext</a> {
<a name="l00110"></a><a class="code" href="structclayer_1_1_run_context.html#ae1e2d0e9546a8a23a59dab02ca0f8eee">00110</a>   std::string <a class="code" href="structclayer_1_1_run_context.html#ae1e2d0e9546a8a23a59dab02ca0f8eee">date</a>;
<a name="l00111"></a><a class="code" href="structclayer_1_1_run_context.html#a16d437dde1a57e1134b47abe3592bf15">00111</a>   std::string <a class="code" href="structclayer_1_1_run_context.html#a16d437dde1a57e1134b47abe3592bf15">thread</a>;
<a name="l00112"></a><a class="code" href="structclayer_1_1_run_context.html#a22535def79774a0f3eba75a9b06ee4bb">00112</a>   std::string <a class="code" href="structclayer_1_1_run_context.html#a22535def79774a0f3eba75a9b06ee4bb">time</a>;
<a name="l00113"></a>00113 
<a name="l00117"></a>00117   <a class="code" href="structclayer_1_1_run_context.html#a547524f60c636ce73aeaca8c30aad628" title="default constructs all the members">RunContext</a>() = <span class="keywordflow">default</span>;
<a name="l00118"></a>00118 
<a name="l00126"></a><a class="code" href="structclayer_1_1_run_context.html#ab0285387fba84e8b5dae5968c91c7084">00126</a>   <a class="code" href="structclayer_1_1_run_context.html#a547524f60c636ce73aeaca8c30aad628" title="default constructs all the members">RunContext</a>(<span class="keyword">const</span> std::string &amp;a, <span class="keyword">const</span> std::string &amp;b, <span class="keyword">const</span> std::string &amp;c)
<a name="l00127"></a>00127       : <a class="code" href="structclayer_1_1_run_context.html#ae1e2d0e9546a8a23a59dab02ca0f8eee">date</a>(a), <a class="code" href="structclayer_1_1_run_context.html#a16d437dde1a57e1134b47abe3592bf15">thread</a>(b), <a class="code" href="structclayer_1_1_run_context.html#a22535def79774a0f3eba75a9b06ee4bb">time</a>(c) {}
<a name="l00128"></a>00128 
<a name="l00129"></a>00129 
<a name="l00137"></a><a class="code" href="structclayer_1_1_run_context.html#ac0d242c36dd168a526acd115c5e05a45">00137</a>   <a class="code" href="structclayer_1_1_run_context.html#ac0d242c36dd168a526acd115c5e05a45" title="Returns a tuple of all the members.">decltype</a>(<span class="keyword">auto</span>) tie()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> std::tie(<a class="code" href="structclayer_1_1_run_context.html#ae1e2d0e9546a8a23a59dab02ca0f8eee">date</a>, <a class="code" href="structclayer_1_1_run_context.html#a16d437dde1a57e1134b47abe3592bf15">thread</a>, <a class="code" href="structclayer_1_1_run_context.html#a22535def79774a0f3eba75a9b06ee4bb">time</a>); }
<a name="l00138"></a>00138 
<a name="l00147"></a><a class="code" href="structclayer_1_1_run_context.html#aed0a9cd0db7ab36f4e0582a9e1dc8811">00147</a>   <span class="keywordtype">bool</span> <a class="code" href="structclayer_1_1_run_context.html#aed0a9cd0db7ab36f4e0582a9e1dc8811" title="Compares two RunContext using their tuple representation.">operator&lt;</a>(<span class="keyword">const</span> <a class="code" href="structclayer_1_1_run_context.html" title="Log properties that are inferred when the code is run .">RunContext</a> &amp;rhs)<span class="keyword"> const </span>{ <span class="keywordflow">return</span> tie() &lt; rhs.tie(); }
<a name="l00148"></a>00148 };
<a name="l00149"></a>00149 
<a name="l00150"></a>00150 
<a name="l00158"></a><a class="code" href="namespaceclayer.html#a4e691e1bf0f4a84c439b25ea08c778d4">00158</a> std::ostream &amp;<a class="code" href="namespaceclayer.html#ac481a62be904d97d85982ca57041def8" title="prints CodeContext c to an out-stream ss">operator&lt;&lt;</a>(std::ostream &amp;ss, <span class="keyword">const</span> <a class="code" href="structclayer_1_1_run_context.html" title="Log properties that are inferred when the code is run .">RunContext</a> &amp;r) {
<a name="l00159"></a>00159   <span class="keywordflow">return</span> util::to_string(ss, r.tie());
<a name="l00160"></a>00160 }
<a name="l00161"></a>00161 
<a name="l00167"></a><a class="code" href="classclayer_1_1_log_record.html">00167</a> <span class="keyword">class </span><a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> {
<a name="l00168"></a>00168 <span class="keyword">public</span>:
<a name="l00169"></a>00169 
<a name="l00170"></a>00170   <span class="keyword">using</span> State = std::pair&lt;CodeContext, RunContext&gt;;
<a name="l00171"></a>00171 
<a name="l00175"></a>00175   <a class="code" href="classclayer_1_1_log_record.html#a6858430600b02a67dd70a15fbcea9549" title="default constructs all the members">LogRecord</a>() = <span class="keywordflow">default</span>;
<a name="l00176"></a>00176 
<a name="l00184"></a>00184   <span class="keyword">friend</span> std::ostream &amp;<a class="code" href="classclayer_1_1_log_record.html#a6ea076021153865b55da53101362bdc3" title="prints LogRecord c to an out-stream ss">operator&lt;&lt;</a>(std::ostream &amp;s, <span class="keyword">const</span> <a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> &amp;c);
<a name="l00185"></a>00185 
<a name="l00186"></a><a class="code" href="classclayer_1_1_log_record.html#aeeaceb58b2dcb48fb35f4f02c02c4780">00186</a>   <a class="code" href="structclayer_1_1_code_context.html" title="Log properties that can be inferred from code.">CodeContext</a> <a class="code" href="classclayer_1_1_log_record.html#aeeaceb58b2dcb48fb35f4f02c02c4780">code</a>;               
<a name="l00187"></a><a class="code" href="classclayer_1_1_log_record.html#a25b6c64fd905a6042f0840ce96f7f94d">00187</a>   <a class="code" href="structclayer_1_1_run_context.html" title="Log properties that are inferred when the code is run .">RunContext</a> <a class="code" href="classclayer_1_1_log_record.html#a25b6c64fd905a6042f0840ce96f7f94d" title="Code Context of the log record.">run</a>;                 
<a name="l00188"></a><a class="code" href="classclayer_1_1_log_record.html#a75c2f7b9627cdfac6deba5fbb897a5fc">00188</a>   std::string <a class="code" href="classclayer_1_1_log_record.html#a75c2f7b9627cdfac6deba5fbb897a5fc" title="Run Context of the log record.">message</a>;            
<a name="l00189"></a><a class="code" href="classclayer_1_1_log_record.html#a140325703225bee61cbfa7ab64e6fea4">00189</a>   std::vector&lt;float&gt; <a class="code" href="classclayer_1_1_log_record.html#a140325703225bee61cbfa7ab64e6fea4" title="message of the log record">numbers</a>;     
<a name="l00190"></a>00190 
<a name="l00196"></a><a class="code" href="classclayer_1_1_log_record.html#ac9877658f23e88514b5bf01da86d8ea6">00196</a>   State <a class="code" href="classclayer_1_1_log_record.html#ac9877658f23e88514b5bf01da86d8ea6" title="numbers in the message of the log record">get_state</a>() { <span class="keywordflow">return</span> std::make_pair(<a class="code" href="classclayer_1_1_log_record.html#aeeaceb58b2dcb48fb35f4f02c02c4780">code</a>, <a class="code" href="classclayer_1_1_log_record.html#a25b6c64fd905a6042f0840ce96f7f94d" title="Code Context of the log record.">run</a>); }
<a name="l00197"></a>00197 
<a name="l00198"></a>00198   <span class="comment">// decltype(auto) tie() const { return std::tie(code, message); }</span>
<a name="l00199"></a>00199 
<a name="l00200"></a>00200 
<a name="l00201"></a>00201 
<a name="l00206"></a><a class="code" href="classclayer_1_1_log_record.html#a143c81d4c34336e8e724b055f644ebc1">00206</a>   <a class="code" href="classclayer_1_1_log_record.html#a143c81d4c34336e8e724b055f644ebc1">decltype</a>(<span class="keyword">auto</span>) tie()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> std::tie(<a class="code" href="classclayer_1_1_log_record.html#aeeaceb58b2dcb48fb35f4f02c02c4780">code</a>, <a class="code" href="classclayer_1_1_log_record.html#a25b6c64fd905a6042f0840ce96f7f94d" title="Code Context of the log record.">run</a>); }
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="keyword">private</span>:
<a name="l00209"></a>00209   <span class="comment">// TODO: make code private and try to make read_prop friendly</span>
<a name="l00210"></a>00210   <span class="comment">// NOTE: lmgtfy.com?q=one cannot declare a namespace within a class</span>
<a name="l00211"></a>00211   <span class="comment">// RunContext prog;</span>
<a name="l00212"></a>00212 };
<a name="l00213"></a>00213 
<a name="l00221"></a>00221 <span class="keyword">template</span> &lt;log_properties N&gt; <span class="keywordtype">void</span> <a class="code" href="namespaceclayer.html#a72a5452bb7659b1c1ba921c359d26b84" title="reads the property (on which the function is templates) into a log record p from a string s...">read_prop</a>(LogRecord &amp;p, <span class="keyword">const</span> std::string &amp;s);
<a name="l00222"></a>00222 
<a name="l00223"></a><a class="code" href="namespaceclayer.html#a86ac5a6738b72eb606efcdcc63808d84">00223</a> <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> <a class="code" href="namespaceclayer.html#a86ac5a6738b72eb606efcdcc63808d84">read_prop&lt;FILE&gt;</a>(<a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> &amp;p, <span class="keyword">const</span> std::string &amp;s) {
<a name="l00224"></a>00224   std::istringstream(s) &gt;&gt; p.code.file;
<a name="l00225"></a>00225 }
<a name="l00226"></a><a class="code" href="namespaceclayer.html#a1738ff03919089677c0709dc6c9b36ca">00226</a> <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> <a class="code" href="namespaceclayer.html#a1738ff03919089677c0709dc6c9b36ca">read_prop&lt;FUNC&gt;</a>(<a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> &amp;p, <span class="keyword">const</span> std::string &amp;s) {
<a name="l00227"></a>00227   std::istringstream(s) &gt;&gt; p.code.func;
<a name="l00228"></a>00228 }
<a name="l00229"></a>00229 
<a name="l00230"></a><a class="code" href="namespaceclayer.html#a41f23029ed91bce1ebf240e610a508f1">00230</a> <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> <a class="code" href="namespaceclayer.html#a41f23029ed91bce1ebf240e610a508f1">read_prop&lt;LEVEL&gt;</a>(<a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> &amp;p, <span class="keyword">const</span> std::string &amp;s) {
<a name="l00231"></a>00231   std::istringstream(s) &gt;&gt; p.code.level;
<a name="l00232"></a>00232 }
<a name="l00233"></a>00233 
<a name="l00234"></a><a class="code" href="namespaceclayer.html#a855c660117d8aa796083846aa99074e5">00234</a> <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> <a class="code" href="namespaceclayer.html#a855c660117d8aa796083846aa99074e5">read_prop&lt;LINE&gt;</a>(<a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> &amp;p, <span class="keyword">const</span> std::string &amp;s) {
<a name="l00235"></a>00235   std::istringstream(s) &gt;&gt; p.code.line;
<a name="l00236"></a>00236 }
<a name="l00237"></a>00237 
<a name="l00238"></a><a class="code" href="namespaceclayer.html#aaad21143b448d62588cff70dcf680d24">00238</a> <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> <a class="code" href="namespaceclayer.html#aaad21143b448d62588cff70dcf680d24">read_prop&lt;HASH&gt;</a>(<a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> &amp;p, <span class="keyword">const</span> std::string &amp;s) {
<a name="l00239"></a>00239   std::istringstream(s) &gt;&gt; p.code.hash;
<a name="l00240"></a>00240 }
<a name="l00241"></a>00241 
<a name="l00242"></a><a class="code" href="namespaceclayer.html#a3a9dfa26873bfff817d6eec1cbc9b7be">00242</a> <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> <a class="code" href="namespaceclayer.html#a3a9dfa26873bfff817d6eec1cbc9b7be">read_prop&lt;DATE&gt;</a>(<a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> &amp;p, <span class="keyword">const</span> std::string &amp;s) {
<a name="l00243"></a>00243   std::istringstream(s) &gt;&gt; p.run.date;
<a name="l00244"></a>00244 }
<a name="l00245"></a>00245 
<a name="l00246"></a><a class="code" href="namespaceclayer.html#a0a10a727f095d5c05adeb760e1ab7189">00246</a> <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> <a class="code" href="namespaceclayer.html#a0a10a727f095d5c05adeb760e1ab7189">read_prop&lt;TIME&gt;</a>(<a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> &amp;p, <span class="keyword">const</span> std::string &amp;s) {
<a name="l00247"></a>00247   std::istringstream(s) &gt;&gt; p.run.time;
<a name="l00248"></a>00248 }
<a name="l00249"></a>00249 
<a name="l00250"></a><a class="code" href="namespaceclayer.html#a42261d9e53d4f6ee3817c6682084f610">00250</a> <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> <a class="code" href="namespaceclayer.html#a42261d9e53d4f6ee3817c6682084f610">read_prop&lt;THREAD&gt;</a>(<a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> &amp;p, <span class="keyword">const</span> std::string &amp;s) {
<a name="l00251"></a>00251   std::istringstream(s) &gt;&gt; p.run.thread;
<a name="l00252"></a>00252 }
<a name="l00253"></a>00253 
<a name="l00254"></a><a class="code" href="namespaceclayer.html#a0032a3f91ced6b412f453d9bf111cfe6">00254</a> <span class="keyword">template</span> &lt;&gt; <span class="keywordtype">void</span> <a class="code" href="namespaceclayer.html#a0032a3f91ced6b412f453d9bf111cfe6">read_prop&lt;MESG&gt;</a>(<a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> &amp;p, <span class="keyword">const</span> std::string &amp;s) {
<a name="l00255"></a>00255   p.message = s;
<a name="l00256"></a>00256 }
<a name="l00257"></a>00257 
<a name="l00258"></a>00258 <span class="comment">// TODO: StringRef -&gt; forward iterator on std::string</span>
<a name="l00259"></a><a class="code" href="namespaceclayer.html#a10faaff2f6236452e1fa61813e071b61">00259</a> <span class="keyword">template</span> &lt;StringRef PS&gt; <span class="keywordtype">void</span> <a class="code" href="namespaceclayer.html#a10faaff2f6236452e1fa61813e071b61">read_props</a>(<a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> &amp;p, PS) {}
<a name="l00260"></a>00260 
<a name="l00261"></a>00261 <span class="keyword">template</span> &lt;<a class="code" href="namespaceclayer.html#aa1a0d23ad523777a9592a9507f475b18">StringRef</a> PS, <a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334" title="[items that are contained in a log record]">log_properties</a> head, <a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334" title="[items that are contained in a log record]">log_properties</a>... I&gt;
<a name="l00262"></a><a class="code" href="namespaceclayer.html#a540b52d5f86a493536a6259e02abaae7">00262</a> <span class="keywordtype">void</span> <a class="code" href="namespaceclayer.html#a10faaff2f6236452e1fa61813e071b61">read_props</a>(<a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> &amp;p, PS ps) {
<a name="l00263"></a>00263   read_prop&lt;head&gt;(p, *ps);
<a name="l00264"></a>00264   ps++;
<a name="l00265"></a>00265   <a class="code" href="namespaceclayer.html#a10faaff2f6236452e1fa61813e071b61">read_props</a>&lt;PS, I...&gt;(p, ps);
<a name="l00266"></a>00266 }
<a name="l00267"></a>00267 
<a name="l00280"></a>00280 <span class="keyword">template</span> &lt;<a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334" title="[items that are contained in a log record]">log_properties</a>... I&gt;
<a name="l00281"></a><a class="code" href="namespaceclayer.html#a973c114c6dbfa4a303c38b17bf32e99e">00281</a> <span class="keywordtype">void</span> <a class="code" href="namespaceclayer.html#a973c114c6dbfa4a303c38b17bf32e99e" title="reads all the properties into a log record p from a string s">parse_props</a>(<a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> &amp;p, std::string &amp;line, 
<a name="l00282"></a>00282     std::regex format_regex = std::regex(<span class="stringliteral">&quot;(.*)\\((.*):(.*)\\):(.*)&quot;</span>)) {
<a name="l00283"></a>00283   std::smatch m;
<a name="l00284"></a>00284   std::regex_match(line, m, format_regex);
<a name="l00285"></a>00285   <span class="comment">// std::cout &lt;&lt; m.size() &lt;&lt; &quot; &quot; &lt;&lt; sizeof...(I) &lt;&lt; &quot;\n&quot;;</span>
<a name="l00286"></a>00286   <a class="code" href="namespaceclayer.html#a10faaff2f6236452e1fa61813e071b61">read_props</a>&lt;std::smatch::iterator, I...&gt;(p, m.begin() + 1);
<a name="l00287"></a>00287 }
<a name="l00288"></a>00288 
<a name="l00289"></a>00289 
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 <span class="comment">// * LogRecord can be generated by a CodeContext - &quot;Where&quot;, or a RunContext - &quot;When&quot;</span>
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 <span class="keyword">template</span>&lt;log_properties prop&gt; <a class="code" href="namespaceclayer.html#a498e10e972debc88f020338b0c1f75f0">decltype</a>(<span class="keyword">auto</span>) get_prop(const LogRecord&amp; rec);
<a name="l00294"></a>00294 
<a name="l00295"></a><a class="code" href="namespaceclayer.html#a19492d6a0486050878db9b9aa2cc9356">00295</a> template&lt;&gt; <a class="code" href="namespaceclayer.html#a498e10e972debc88f020338b0c1f75f0">decltype</a>(auto) get_prop&lt;<a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334abea7716ef6bcafe8a74ff6b2c86ae374">FILE</a>&gt;(const <a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a>&amp; rec) {<span class="keywordflow">return</span> rec.code.file;}
<a name="l00296"></a>00296 <span class="keyword">template</span>&lt;&gt; <a class="code" href="namespaceclayer.html#a498e10e972debc88f020338b0c1f75f0">decltype</a>(<span class="keyword">auto</span>) get_prop&lt;<a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334ac975454fa5dbcafacc2429cffbd3009a" title="File name (CodeContext)">FUNC</a>&gt;(const LogRecord&amp; rec) {<span class="keywordflow">return</span> rec.code.func;}
<a name="l00297"></a>00297 <span class="keyword">template</span>&lt;&gt; <a class="code" href="namespaceclayer.html#a498e10e972debc88f020338b0c1f75f0">decltype</a>(<span class="keyword">auto</span>) get_prop&lt;<a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334ac6f9b94cf7a9463645e3d93b04cec373" title="Function name (CodeContext)">LEVEL</a>&gt;(const LogRecord&amp; rec) {<span class="keywordflow">return</span> rec.code.level;}
<a name="l00298"></a>00298 <span class="keyword">template</span>&lt;&gt; <a class="code" href="namespaceclayer.html#a498e10e972debc88f020338b0c1f75f0">decltype</a>(<span class="keyword">auto</span>) get_prop&lt;<a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334aa02d0b68ab7febfc558d5cb86d19b429" title="Severity level name (CodeContext)">LINE</a>&gt;(const LogRecord&amp; rec) {<span class="keywordflow">return</span> rec.code.line;}
<a name="l00299"></a>00299 <span class="keyword">template</span>&lt;&gt; <a class="code" href="namespaceclayer.html#a498e10e972debc88f020338b0c1f75f0">decltype</a>(<span class="keyword">auto</span>) get_prop&lt;<a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334a812e4c7f1fc43183a01346eb6fe4ec7d" title="Line number (CodeContext)">DATE</a>&gt;(const LogRecord&amp; rec) {<span class="keywordflow">return</span> rec.run.date;}
<a name="l00300"></a>00300 <span class="keyword">template</span>&lt;&gt; <a class="code" href="namespaceclayer.html#a498e10e972debc88f020338b0c1f75f0">decltype</a>(<span class="keyword">auto</span>) get_prop&lt;<a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334a7d7d5a79b118123bebafe4e2b0a91d29" title="Date on which a Log Record is created (RunContext)">TIME</a>&gt;(const LogRecord&amp; rec) {<span class="keywordflow">return</span> rec.run.time;}
<a name="l00301"></a>00301 <span class="keyword">template</span>&lt;&gt; <a class="code" href="namespaceclayer.html#a498e10e972debc88f020338b0c1f75f0">decltype</a>(<span class="keyword">auto</span>) get_prop&lt;<a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334a299b0bef06e21f5caf5b511994b4ba74" title="Time at which a Log Record is created (RunContext)">THREAD</a>&gt;(const LogRecord&amp; rec) {<span class="keywordflow">return</span> rec.run.thread;}
<a name="l00302"></a>00302 
<a name="l00303"></a>00303 <span class="keyword">template</span>&lt;<span class="keyword">typename</span> T = <span class="keywordtype">void</span>&gt;
<a name="l00304"></a>00304 std::ostream&amp;  <a class="code" href="namespaceclayer.html#af763680f37eb9f9ab963d451f58e12ef" title="gets all the properties from a log record p and streams to an outstream">get_props</a>(std::ostream&amp;, <span class="keyword">const</span> LogRecord&amp;);
<a name="l00305"></a>00305 
<a name="l00306"></a>00306 <span class="keyword">template</span>&lt;&gt;
<a name="l00307"></a><a class="code" href="namespaceclayer.html#a1d0af2f7efb40325120d0fe19e9c129b">00307</a> std::ostream&amp;  get_props&lt;&gt;(std::ostream&amp; os, <span class="keyword">const</span> <a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a>&amp; rec){
<a name="l00308"></a>00308     <span class="keywordflow">return</span> os;
<a name="l00309"></a>00309 }
<a name="l00310"></a>00310 
<a name="l00320"></a>00320 <span class="keyword">template</span>&lt;<a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334" title="[items that are contained in a log record]">log_properties</a> head, <a class="code" href="namespaceclayer.html#ac5e45847e94ce70aeb820de945437334" title="[items that are contained in a log record]">log_properties</a>... I&gt;
<a name="l00321"></a><a class="code" href="namespaceclayer.html#a538289c22c08448eee53a827c40daaf2">00321</a> std::ostream&amp;  <a class="code" href="namespaceclayer.html#af763680f37eb9f9ab963d451f58e12ef" title="gets all the properties from a log record p and streams to an outstream">get_props</a>(std::ostream&amp; os, <span class="keyword">const</span> <a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a>&amp; rec) {
<a name="l00322"></a>00322     os &lt;&lt; get_prop&lt;head&gt;(rec)&lt;&lt;<span class="stringliteral">&quot; &quot;</span>;
<a name="l00323"></a>00323     <a class="code" href="namespaceclayer.html#af763680f37eb9f9ab963d451f58e12ef" title="gets all the properties from a log record p and streams to an outstream">get_props</a>&lt;I...&gt;(os, rec);
<a name="l00324"></a>00324     <span class="keywordflow">return</span> os;
<a name="l00325"></a>00325 }
<a name="l00326"></a>00326 
<a name="l00327"></a>00327 <span class="comment">// std::ostream&amp; get_props_test(std::ostream&amp; os, const LogRecord&amp; rec) {</span>
<a name="l00328"></a>00328 <span class="comment">//   return get_props&lt;FILE, FUNC&gt;(os, rec);</span>
<a name="l00329"></a>00329 <span class="comment">// }</span>
<a name="l00330"></a>00330 
<a name="l00331"></a>00331 
<a name="l00338"></a><a class="code" href="namespaceclayer.html#ad77d7fb7e976b736de0983e060e24a1a">00338</a> std::ostream &amp;<a class="code" href="namespaceclayer.html#ac481a62be904d97d85982ca57041def8" title="prints CodeContext c to an out-stream ss">operator&lt;&lt;</a>(std::ostream &amp;os, <span class="keyword">const</span> <a class="code" href="classclayer_1_1_log_record.html" title="Each line in a log file can be considered a Log Record.">LogRecord</a> &amp;lr) {
<a name="l00339"></a>00339   <span class="keywordflow">return</span> util::to_string(os, lr.tie()) &lt;&lt; lr.<a class="code" href="classclayer_1_1_log_record.html#a75c2f7b9627cdfac6deba5fbb897a5fc" title="Run Context of the log record.">message</a>;
<a name="l00340"></a>00340 }
<a name="l00341"></a>00341 
<a name="l00348"></a><a class="code" href="namespaceclayer.html#a79548e53a7eddc2b84c22000630108ae">00348</a> std::ostream &amp;<a class="code" href="namespaceclayer.html#ac481a62be904d97d85982ca57041def8" title="prints CodeContext c to an out-stream ss">operator&lt;&lt;</a>(std::ostream &amp;os,
<a name="l00349"></a>00349                           <span class="keyword">const</span> std::pair&lt;CodeContext, RunContext&gt; &amp;p){
<a name="l00350"></a>00350 
<a name="l00351"></a>00351   <span class="keywordflow">return</span> util::to_string(os, std::tuple&lt;CodeContext, RunContext&gt;(p));
<a name="l00352"></a>00352 }
<a name="l00353"></a>00353 }
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 <span class="preprocessor">#endif </span><span class="comment">/*__PROPERTY_H__*/</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
